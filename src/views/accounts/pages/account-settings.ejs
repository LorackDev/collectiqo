<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://kit.fontawesome.com/433b24fc29.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

<!--    <link rel="stylesheet" href="/css/home.css">-->
    <link rel="stylesheet" href="/css/modal.css">
    <link rel="stylesheet" href="/css/account-settings.css">
    <link rel="stylesheet" href="/css/templates/sidebar.css">
    <link rel="stylesheet" href="/css/templates/new-collection-modal.css">
    <script src="/js/home-navigation.js"></script>
    <script src="/js/sidebar.js"></script>
<!--    <script src="/js/calcTH.js"></script>-->
    <script src="/js/modal.js"></script>
    <script src="/js/collection-action.js"></script>

    <title>Home</title>
</head>

<body>

<%- include('../../templates/sidebar.ejs') %>

<div class="content-container">
    <div class="content">

        <button class="settings-button" id="general-settings-btn">General</button>
        <button class="settings-button" id="collection-settings-btn">Collections</button>
        <button class="settings-button" id="account-management-btn">Account</button>
        <button class="settings-button" id="extra-settings-btn">Extras</button>

        <div class="settingsDesign">

    <div id="general-settings">
        <h2>General</h2>

        <form id="generalSettingsForm">

            <div class="form-group">
                <label for="username">Username:</label>
                <input type="text" id="username" name="username">
            </div>

            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email">
            </div>

            <button type="submit">Update General Settings</button>

        </form>
    </div>

    <div  id="account-settings" style="display: none;">
        <h2>Account Management</h2>

        <form id="passwordChangeForm">
            <div class="form-group">
                <label for="currentPassword">Current Password:</label>
                <input type="password" id="currentPassword" name="currentPassword">
            </div>

            <div class="form-group">
                <label for="newPassword">New Password:</label>
                <input type="password" id="newPassword" name="newPassword">
            </div>

            <div class="form-group">
                <label for="confirmPassword">Confirm New Password:</label>
                <input type="password" id="confirmPassword" name="confirmPassword">
            </div>

            <button type="submit">Change Password</button>
        </form>
    </div>

            <div id="collection-settings" style="display: none;">
                <h2>Collection Settings</h2>

            </div>

    <div id="extra-settings" style="display: none;">
        <h2>Delete Account</h2>

        <form id="accountDeletionForm">
            <button type="button" onclick="confirmAccountDeletion();">Delete Account</button>
        </form>
    </div>
        </div>

    </main>

        <script src="/js/account-settings.js" type="module"></script>
<!--
<script>
        import req from "express/lib/request";

        function confirmAccountDeletion() {
            if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
                console.log('Account deletion confirmed.');
            }
        }

        const updateUsernameHandler = require('./updateUsernameHandler');
        const updatePasswordHandler = require('./updatePasswordHandler');
        const deleteAccountHandler = require('./deleteAccountHandler'); // You need to implement this

        window.onload = function() {
            document.getElementById('generalSettingsForm').addEventListener('submit', async function(event) {
                event.preventDefault();
                const username = document.getElementById('username').value;
                const email = document.getElementById('email').value;
                await updateUsernameHandler({ body: { newUsername: username }, session: { username } }, {
                    status: (statusCode) => ({ json: (response) => console.log(response) })
                });
            });

            document.getElementById('passwordChangeForm').addEventListener('submit', async function(event) {
                event.preventDefault();
                const oldPassword = document.getElementById('currentPassword').value;
                const newPassword = document.getElementById('newPassword').value;
                const username = req.session.user.name;
                await updatePasswordHandler({ body: { oldPassword, newPassword }, session: { username } }, {
                    status: (statusCode) => ({ json: (response) => console.log(response) })
                });
            });

            document.getElementById('accountDeletionForm').addEventListener('submit', async function(event) {
                event.preventDefault();
                const username = req.session.user.name;
                await deleteAccountHandler({ session: { username } }, {
                    status: (statusCode) => ({ json: (response) => console.log(response) })
                });
            });
        }

        function openSettings(settingsName){
            var i;
            var x = document.getElementsByClassName("settingsTabs");
            for (i = 0; i < x.length; i++) {
                x[i].style.display = "none";
            }
            document.getElementById(settingsName).style.display = "block";
        }

    </script>-->
        <%- include('../../templates/new-collection-modal.html') %>
    </div>

</div>
</body>
</html>




<!--

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/account-settings.css">
    <title>Account Settings</title>
</head>
<body>
    <main>
        <section class="general-settings">
            <h2>General</h2>

            <form id="generalSettingsForm">

                <div class="form-group">
                    <label for="username">Username:</label>
                    <input type="text" id="username" name="username">
                </div>

                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email">
                </div>

                <button type="submit">Update General Settings</button>

            </form>
        </section>

        <section class="account-management">
            <h2>Account Management</h2>
            
            <form id="passwordChangeForm">
                <div class="form-group">
                    <label for="currentPassword">Current Password:</label>
                    <input type="password" id="currentPassword" name="currentPassword">
                </div>
                
                <div class="form-group">
                    <label for="newPassword">New Password:</label>
                    <input type="password" id="newPassword" name="newPassword">
                </div>

                <div class="form-group">
                    <label for="confirmPassword">Confirm New Password:</label>
                    <input type="password" id="confirmPassword" name="confirmPassword">
                </div>

                <button type="submit">Change Password</button>
            </form>
        </section>

        <section class="delete-account">
                <h2>Delete Account</h2>

                    <form id="accountDeletionForm">
                        <button type="button" onclick="confirmAccountDeletion();">Delete Account</button>
                    </form>
        </section>
    
    </main>

    <script>
        import req from "express/lib/request";

        function confirmAccountDeletion() {
            if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
                console.log('Account deletion confirmed.');
            }
        }

        const updateUsernameHandler = require('./updateUsernameHandler');
        const updatePasswordHandler = require('./updatePasswordHandler');
        const deleteAccountHandler = require('./deleteAccountHandler'); // You need to implement this

        window.onload = function() {
            document.getElementById('generalSettingsForm').addEventListener('submit', async function(event) {
                event.preventDefault();
                const username = document.getElementById('username').value;
                const email = document.getElementById('email').value;
                await updateUsernameHandler({ body: { newUsername: username }, session: { username } }, {
                    status: (statusCode) => ({ json: (response) => console.log(response) })
                });
            });

            document.getElementById('passwordChangeForm').addEventListener('submit', async function(event) {
                event.preventDefault();
                const oldPassword = document.getElementById('currentPassword').value;
                const newPassword = document.getElementById('newPassword').value;
                const username = req.session.user.name;
                await updatePasswordHandler({ body: { oldPassword, newPassword }, session: { username } }, {
                    status: (statusCode) => ({ json: (response) => console.log(response) })
                });
            });

            document.getElementById('accountDeletionForm').addEventListener('submit', async function(event) {
                event.preventDefault();
                const username = req.session.user.name;
                await deleteAccountHandler({ session: { username } }, {
                    status: (statusCode) => ({ json: (response) => console.log(response) })
                });
            });
        }

    </script>
</body>
</html>
-->
